<Window x:Class="AuswertungPro.Next.UI.Views.Windows.CodeCatalogEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Code-Katalog"
        Width="1050"
        Height="680"
        WindowStartupLocation="CenterOwner">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1.2*" />
            <ColumnDefinition Width="0.9*" />
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBlock Text="Suche:" VerticalAlignment="Center" Margin="0,0,6,0" />
            <TextBox Width="280"
                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" />
            <TextBlock Text="Gruppe:" VerticalAlignment="Center" Margin="14,0,6,0" />
            <ComboBox Width="200"
                      ItemsSource="{Binding GroupOptions}"
                      SelectedItem="{Binding SelectedGroup}" />
        </StackPanel>

        <DataGrid Grid.Row="1"
                  Grid.Column="0"
                  Margin="0,0,10,0"
                  ItemsSource="{Binding CodesView}"
                  SelectedItem="{Binding SelectedCode}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  SelectionUnit="FullRow"
                  RowHeaderWidth="0">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Code" Binding="{Binding Code, UpdateSourceTrigger=PropertyChanged}" Width="110" />
                <DataGridTextColumn Header="Title" Binding="{Binding Title, UpdateSourceTrigger=PropertyChanged}" Width="*" />
                <DataGridTextColumn Header="Group" Binding="{Binding Group, UpdateSourceTrigger=PropertyChanged}" Width="150" />
            </DataGrid.Columns>
        </DataGrid>

        <Border Grid.Row="1" Grid.Column="1" Padding="12" BorderThickness="1" CornerRadius="8">
            <StackPanel>
                <TextBlock Text="Detail" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,10" />
                <TextBlock Text="Code" />
                <TextBox Margin="0,2,0,8"
                         Text="{Binding SelectedCode.Code, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="Title" />
                <TextBox Margin="0,2,0,8"
                         Text="{Binding SelectedCode.Title, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="Group" />
                <TextBox Margin="0,2,0,8"
                         Text="{Binding SelectedCode.Group, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="Description" />
                <TextBox Margin="0,2,0,8"
                         Height="170"
                         TextWrapping="Wrap"
                         AcceptsReturn="True"
                         VerticalScrollBarVisibility="Auto"
                         Text="{Binding SelectedCode.Description, UpdateSourceTrigger=PropertyChanged}" />

                <TextBlock Text="Validierungsfehler" FontWeight="SemiBold" Margin="0,6,0,4" />
                <ListBox Height="140" ItemsSource="{Binding ValidationMessages}" />
            </StackPanel>
        </Border>

        <DockPanel Grid.Row="2" Grid.ColumnSpan="2" Margin="0,12,0,0">
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                <Button Content="Neu" Width="100" Margin="0,0,8,0" Command="{Binding NewCommand}" />
                <Button Content="Loeschen" Width="100" Command="{Binding DeleteCommand}" />
            </StackPanel>

            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Validieren" Width="110" Margin="0,0,8,0" Command="{Binding ValidateCommand}" />
                <Button Content="Speichern" Width="110" Margin="0,0,8,0" Command="{Binding SaveCommand}" />
                <Button Content="Abbrechen" Width="110" Command="{Binding CancelCommand}" />
            </StackPanel>
        </DockPanel>
    </Grid>
</Window>
