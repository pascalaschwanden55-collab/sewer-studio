<UserControl x:Class="AuswertungPro.Next.UI.Views.Pages.SchaechtePage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <UserControl.Resources>
        <Style x:Key="AlignToggleButtonStyle" TargetType="ToggleButton">
            <Setter Property="Width" Value="30"/>
            <Setter Property="Height" Value="26"/>
            <Setter Property="MinWidth" Value="30"/>
            <Setter Property="MinHeight" Value="26"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="0,0,4,0"/>
            <Setter Property="Background" Value="{StaticResource CardBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Style.Triggers>
                <Trigger Property="IsChecked" Value="True">
                    <Setter Property="BorderBrush" Value="{StaticResource NeonCyanBrush}"/>
                    <Setter Property="Background" Value="{StaticResource HeaderBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SecondaryToggleButton" TargetType="ToggleButton">
            <Setter Property="MinHeight" Value="48"/>
            <Setter Property="MinWidth" Value="140"/>
            <Setter Property="Padding" Value="24,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Background" Value="{StaticResource CardBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Orientation="Vertical" Margin="0,0,0,12">
            <StackPanel Orientation="Horizontal">
                <Button Content="+ Record" Command="{Binding AddCommand}"/>
                <Button Content="- Loeschen" Command="{Binding RemoveCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
                <Button Content="Nach oben" Command="{Binding MoveUpCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
                <Button Content="Nach unten" Command="{Binding MoveDownCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
                <Button Content="Speichern" Command="{Binding SaveCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
                <ToggleButton Content="Spalten anordnen"
                              Margin="8,0,0,0"
                              Style="{StaticResource SecondaryToggleButton}"
                              IsChecked="{Binding IsColumnReorderEnabled}"/>
            </StackPanel>

            <Border Background="{StaticResource CardBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
                    Padding="6" Margin="0,8,0,0" CornerRadius="6">
                <StackPanel Orientation="Vertical">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Suche Schacht:" Foreground="{StaticResource TextBrush}" VerticalAlignment="Center" Margin="0,0,8,0"/>
                        <TextBox x:Name="SearchBox"
                                 Width="200"
                                 VerticalAlignment="Center"
                                 Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                                 TextChanged="SearchBox_TextChanged"/>
                        <Button Content="X"
                                Margin="4,0,0,0"
                                Padding="6,2"
                                Style="{StaticResource SecondaryButton}"
                                Command="{Binding ClearSearchCommand}"
                                ToolTip="Suche zuruecksetzen"/>

                        <TextBlock Text="{Binding SearchResultInfo}" Foreground="{StaticResource TextBrush}" VerticalAlignment="Center" Margin="12,0,0,0"/>

                        <TextBlock Text="Zeilenhoehe:" Foreground="{StaticResource TextBrush}" VerticalAlignment="Center" Margin="16,0,8,0"/>
                        <Slider Width="180"
                                Minimum="24"
                                Maximum="120"
                                Value="{Binding GridMinRowHeight, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                SmallChange="1"
                                LargeChange="6"
                                IsSnapToTickEnabled="False"
                                VerticalAlignment="Center"/>
                        <TextBlock Text="{Binding GridMinRowHeight, StringFormat={}{0:0.#}}"
                                   Foreground="{StaticResource TextBrush}"
                                   VerticalAlignment="Center"
                                   Margin="8,0,0,0"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,6,0,0">
                        <TextBlock Text="Ausrichtung:" Foreground="{StaticResource TextBrush}" VerticalAlignment="Center" Margin="0,0,8,0"/>

                        <StackPanel Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <ToggleButton x:Name="AlignLeftButton" Style="{StaticResource AlignToggleButtonStyle}"
                                              ToolTip="Horizontal links" Click="AlignLeftButton_Click">
                                    <StackPanel Width="14" Height="12" VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Border Height="1.6" Width="12" HorizontalAlignment="Left" Margin="0,0,0,2" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                        <Border Height="1.6" Width="9" HorizontalAlignment="Left" Margin="0,0,0,2" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                        <Border Height="1.6" Width="11" HorizontalAlignment="Left" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                    </StackPanel>
                                </ToggleButton>
                                <ToggleButton x:Name="AlignCenterButton" Style="{StaticResource AlignToggleButtonStyle}"
                                              ToolTip="Horizontal zentriert" Click="AlignCenterButton_Click">
                                    <StackPanel Width="14" Height="12" VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Border Height="1.6" Width="12" HorizontalAlignment="Center" Margin="0,0,0,2" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                        <Border Height="1.6" Width="9" HorizontalAlignment="Center" Margin="0,0,0,2" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                        <Border Height="1.6" Width="11" HorizontalAlignment="Center" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                    </StackPanel>
                                </ToggleButton>
                                <ToggleButton x:Name="AlignRightButton" Style="{StaticResource AlignToggleButtonStyle}"
                                              ToolTip="Horizontal rechts" Click="AlignRightButton_Click">
                                    <StackPanel Width="14" Height="12" VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <Border Height="1.6" Width="12" HorizontalAlignment="Right" Margin="0,0,0,2" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                        <Border Height="1.6" Width="9" HorizontalAlignment="Right" Margin="0,0,0,2" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                        <Border Height="1.6" Width="11" HorizontalAlignment="Right" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                    </StackPanel>
                                </ToggleButton>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0,4,0,0">
                                <ToggleButton x:Name="AlignTopButton" Style="{StaticResource AlignToggleButtonStyle}"
                                              ToolTip="Vertikal oben" Click="AlignTopButton_Click">
                                    <Grid Width="14" Height="12" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Border BorderThickness="1" CornerRadius="1" BorderBrush="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                        <Border Height="2" Width="8" VerticalAlignment="Top" Margin="0,2,0,0" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                    </Grid>
                                </ToggleButton>
                                <ToggleButton x:Name="AlignMiddleButton" Style="{StaticResource AlignToggleButtonStyle}"
                                              ToolTip="Vertikal mitte" Click="AlignMiddleButton_Click">
                                    <Grid Width="14" Height="12" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Border BorderThickness="1" CornerRadius="1" BorderBrush="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                        <Border Height="2" Width="8" VerticalAlignment="Center" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                    </Grid>
                                </ToggleButton>
                                <ToggleButton x:Name="AlignBottomButton" Style="{StaticResource AlignToggleButtonStyle}"
                                              ToolTip="Vertikal unten" Click="AlignBottomButton_Click">
                                    <Grid Width="14" Height="12" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Border BorderThickness="1" CornerRadius="1" BorderBrush="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                        <Border Height="2" Width="8" VerticalAlignment="Bottom" Margin="0,0,0,2" Background="{Binding Foreground, RelativeSource={RelativeSource AncestorType=ToggleButton}}"/>
                                    </Grid>
                                </ToggleButton>
                            </StackPanel>
                        </StackPanel>

                        <TextBlock Text="(Zelle oder Spaltenkopf auswaehlen)"
                                   Foreground="{StaticResource MutedBrush}"
                                   VerticalAlignment="Center"
                                   Margin="10,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </StackPanel>

        <DataGrid x:Name="Grid"
                  Grid.Row="1"
                  ItemsSource="{Binding Records}"
                  SelectedItem="{Binding Selected, Mode=TwoWay}"
                  AutoGenerateColumns="False"
                  CanUserResizeRows="True"
                  CanUserResizeColumns="True"
                  CanUserReorderColumns="{Binding IsColumnReorderEnabled}"
                  HeadersVisibility="All"
                  GridLinesVisibility="All"
                  VerticalGridLinesBrush="{StaticResource BorderBrush}"
                  HorizontalGridLinesBrush="{StaticResource BorderBrush}"
                  FrozenColumnCount="2"
                  RowHeaderWidth="24"
                  MinRowHeight="{Binding GridMinRowHeight}"
                  EnableRowVirtualization="True"
                  EnableColumnVirtualization="True"
                  VirtualizingPanel.IsVirtualizing="True"
                  VirtualizingPanel.VirtualizationMode="Recycling"
                  VirtualizingPanel.ScrollUnit="Pixel"
                  ScrollViewer.CanContentScroll="True"
                  CanUserSortColumns="False"
                  CellEditEnding="Grid_CellEditEnding"
                  SelectedCellsChanged="Grid_SelectedCellsChanged"
                  CurrentCellChanged="Grid_CurrentCellChanged"
                  PreviewMouseWheel="Grid_PreviewMouseWheel"
                  PreviewMouseDoubleClick="Grid_PreviewMouseDoubleClick"/>

        <TextBlock Grid.Row="2"
                   Text="{Binding LastResult}"
                   Margin="0,10,0,0"
                   Foreground="{StaticResource MutedBrush}"/>
    </Grid>
</UserControl>
