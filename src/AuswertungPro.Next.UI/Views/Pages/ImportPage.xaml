<UserControl x:Class="AuswertungPro.Next.UI.Views.Pages.ImportPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
            <Button Content="Import PDF" Command="{Binding ImportPdfCommand}"/>
            <Button Content="Import XTF/M150/MDB" Command="{Binding ImportXtfCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
            <Button Content="WinCan-Projekte" Command="{Binding ImportWinCanCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
            <Button Content="IBAK-Projekte" Command="{Binding ImportIbakCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
            <Button Content="KINS-Projekte" Command="{Binding ImportKinsCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
            <Button Content="Haltungen verteilen" Command="{Binding DistributeHoldingsCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
            <Button Content="Schaechte verteilen" Command="{Binding DistributeShaftsCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
            <Button Content="Import-Report" Command="{Binding ExportImportSummaryCommand}" Margin="8,0,0,0" Style="{StaticResource SecondaryButton}"/>
        </StackPanel>

        <Border Grid.Row="1" Background="{StaticResource CardBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
                Padding="8" Margin="0,0,0,8" CornerRadius="6">
            <DockPanel LastChildFill="True">
                <Button Content="Katalog neu laden"
                        Command="{Binding ReloadCatalogCommand}"
                        Style="{StaticResource SecondaryButton}"
                        DockPanel.Dock="Right"
                        Margin="12,0,0,0"/>
                <TextBlock Text="{Binding CatalogStatus}" TextWrapping="Wrap">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="{StaticResource TextBrush}"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsCatalogOk}" Value="False">
                                    <Setter Property="Foreground" Value="#FFC62828"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </DockPanel>
        </Border>

        <Border Grid.Row="2" Background="{StaticResource CardBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
                Padding="8" Margin="0,0,0,8" CornerRadius="6">
            <Border.Style>
                <Style TargetType="Border">
                    <Setter Property="Visibility" Value="Collapsed"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsImportInProgress}" Value="True">
                            <Setter Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsDistributionInProgress}" Value="True">
                            <Setter Property="Visibility" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>
            <StackPanel>
                <TextBlock Text="{Binding ImportProgress}" Foreground="{StaticResource TextBrush}" />
                <TextBlock Text="{Binding DistributionProgress}" Foreground="{StaticResource TextBrush}" Margin="0,6,0,0"/>
                <TextBlock Text="{Binding DistributionPercent, StringFormat=Fortschritt: {0:0}%}"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           Margin="0,4,0,0"/>
                <ProgressBar Height="8" Margin="0,6,0,0"
                             Minimum="0" Maximum="100"
                             Value="{Binding DistributionPercent}"
                             IsIndeterminate="{Binding IsDistributionIndeterminate}"/>
            </StackPanel>
        </Border>

        <StackPanel Grid.Row="3">
            <TextBlock Text="Zusammenfassung" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,6"/>
            <TextBox Text="{Binding SummaryText}" AcceptsReturn="True" TextWrapping="Wrap"
                     VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"
                     MinHeight="120"/>
            <Expander Header="Details" Margin="0,8,0,0">
                <TextBox Text="{Binding DetailsText}" AcceptsReturn="True" TextWrapping="Wrap"
                         VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"
                         MinHeight="160"/>
            </Expander>
        </StackPanel>
    </Grid>
</UserControl>
