<Window x:Class="AuswertungPro.Next.UI.Dialogs.CostCatalogEditorDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Positionen bearbeiten"
        Width="980" Height="700"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Theme/ThemeLight.xaml" />
                <ResourceDictionary Source="/Theme/Controls.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Positionen (Kostentabelle)" FontSize="18" FontWeight="SemiBold"/>
            <TextBlock Text="Hier kannst du Positionen hinzufügen, ändern oder löschen."
                       Foreground="{StaticResource MutedBrush}" Margin="0,4,0,0"/>
        </StackPanel>

        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding Items}"
                  SelectedItem="{Binding SelectedItem}"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  GridLinesVisibility="None"
                  HeadersVisibility="Column">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Key" Binding="{Binding Key, UpdateSourceTrigger=PropertyChanged}" Width="160"/>
                <DataGridTextColumn Header="Bezeichnung" Binding="{Binding Name, UpdateSourceTrigger=PropertyChanged}" Width="*"/>
                <DataGridTextColumn Header="Einheit" Binding="{Binding Unit, UpdateSourceTrigger=PropertyChanged}" Width="80"/>
                <DataGridTextColumn Header="Typ" Binding="{Binding Type, UpdateSourceTrigger=PropertyChanged}" Width="80"/>
                <DataGridTextColumn Header="Preis" Binding="{Binding Price, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}" Width="90"/>
                <DataGridCheckBoxColumn Header="Aktiv" Binding="{Binding Active, UpdateSourceTrigger=PropertyChanged}" Width="60"/>
            </DataGrid.Columns>
        </DataGrid>

        <DockPanel Grid.Row="2" Margin="0,12,0,0">
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                <Button Content="+ Position" Command="{Binding AddCommand}" Padding="12,6" Margin="0,0,6,0"/>
                <Button Content="✕ Löschen" Command="{Binding RemoveCommand}" Padding="12,6" Style="{StaticResource SecondaryButton}"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Speichern" Command="{Binding SaveCommand}" Padding="18,6" Margin="0,0,6,0"
                        Style="{StaticResource PrimaryButton}"/>
                <Button Content="Schliessen" Command="{Binding CloseCommand}" Padding="18,6"
                        Style="{StaticResource SecondaryButton}"/>
            </StackPanel>
        </DockPanel>
    </Grid>
</Window>
